import{j as e,l as k,a as $,L as U}from"./index-DJB2iFl8.js";import{r as d}from"./vendor-BoGTwuKF.js";const q=(s,t={})=>{const[l,h]=d.useState({}),r=d.useMemo(()=>Object.keys(l).length===0?s:s.filter(n=>Object.entries(l).every(([u,o])=>{if(!o||o.trim()==="")return!0;const b=n[u];if(b==null)return!1;const x=b.toString().toLowerCase(),c=o.toString().toLowerCase();switch((t[u]||{}).type){case"exact":return x===c;case"number":return parseFloat(b)===parseFloat(o);case"contains":default:return x.includes(c)}})),[s,l,t]),p=(n,u)=>{h(o=>({...o,[n]:u}))},g=n=>{h(u=>{const o={...u};return delete o[n],o})},i=()=>{h({})},N=Object.keys(l).some(n=>l[n]&&l[n].toString().trim()!=="");return{filteredData:r,filters:l,setFilter:p,clearFilter:g,clearAllFilters:i,hasActiveFilters:N}},V=(s,t=10)=>{const[l,h]=d.useState(1),r=s.length,p=Math.ceil(r/t),g=d.useMemo(()=>{const x=(l-1)*t,c=x+t;return s.slice(x,c)},[s,l,t]),i=x=>{const c=Math.max(1,Math.min(x,p));h(c)},N=()=>{i(l+1)},n=()=>{i(l-1)},u=()=>{i(1)},o=()=>{i(p)},b=()=>{h(1)};return{currentPage:l,totalPages:p,totalItems:r,paginatedData:g,hasNextPage:l<p,hasPrevPage:l>1,goToPage:i,goToNextPage:N,goToPrevPage:n,goToFirstPage:u,goToLastPage:o,reset:b}},T=d.memo(({currentPage:s,totalPages:t,totalItems:l,itemsPerPage:h,onPageChange:r,hasNextPage:p,hasPrevPage:g,onNextPage:i,onPrevPage:N,onFirstPage:n,onLastPage:u})=>{if(t<=1)return null;const o=(s-1)*h+1,b=Math.min(s*h,l),x=()=>{const c=[];let C=Math.max(1,s-Math.floor(2.5)),F=Math.min(t,C+5-1);F-C+1<5&&(C=Math.max(1,F-5+1)),C>1&&(c.push(e.jsx("button",{onClick:()=>r(1),className:"pagination-button","aria-label":"Ir a la p√°gina 1",children:"1"},1)),C>2&&c.push(e.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis-start")));for(let j=C;j<=F;j++)c.push(e.jsx("button",{onClick:()=>r(j),className:`pagination-button ${j===s?"active":""}`,"aria-label":`Ir a la p√°gina ${j}`,"aria-current":j===s?"page":void 0,children:j},j));return F<t&&(F<t-1&&c.push(e.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis-end")),c.push(e.jsx("button",{onClick:()=>r(t),className:"pagination-button","aria-label":`Ir a la p√°gina ${t}`,children:t},t))),c};return e.jsxs("div",{className:"pagination-container",role:"navigation","aria-label":"Paginaci√≥n",children:[e.jsxs("div",{className:"pagination-info",children:["Mostrando ",o," - ",b," de ",l," resultados"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:n,disabled:!g,className:"pagination-button","aria-label":"Ir a la primera p√°gina",children:"‚èÆÔ∏è Primera"}),e.jsx("button",{onClick:N,disabled:!g,className:"pagination-button","aria-label":"Ir a la p√°gina anterior",children:"‚¨ÖÔ∏è Anterior"}),x(),e.jsx("button",{onClick:i,disabled:!p,className:"pagination-button","aria-label":"Ir a la p√°gina siguiente",children:"Siguiente ‚û°Ô∏è"}),e.jsx("button",{onClick:u,disabled:!p,className:"pagination-button","aria-label":"Ir a la √∫ltima p√°gina",children:"√öltima ‚è≠Ô∏è"})]})]})});T.displayName="Pagination";const _={id:{type:"exact"},telefono:{type:"contains"},email:{type:"contains"}},S=10,m=d.memo(({children:s,className:t="",title:l})=>e.jsx("td",{className:`table-cell ${t}`,title:l,children:s}));m.displayName="TableCell";const f=d.memo(({field:s,label:t,value:l,onChange:h,placeholder:r})=>e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:`filter-${s}`,className:"filter-label",children:t}),e.jsx("input",{id:`filter-${s}`,type:"text",value:l||"",onChange:p=>h(s,p.target.value),placeholder:r,className:"filter-input"})]}));f.displayName="FilterInput";const z=()=>{const[s,t]=d.useState([]),[l,h]=d.useState(!0),[r,p]=d.useState(null),{filteredData:g,filters:i,setFilter:N,clearAllFilters:n,hasActiveFilters:u}=q(s,_),{currentPage:o,totalPages:b,totalItems:x,paginatedData:c,hasNextPage:P,hasPrevPage:C,goToPage:F,goToNextPage:j,goToPrevPage:L,goToFirstPage:M,goToLastPage:A,reset:E}=V(g,S),I=d.useCallback(async()=>{var a;try{h(!0),p(null),k.info("Loading users...");const y=await $.getUsers();t(y.data||[]),k.info(`Loaded ${((a=y.data)==null?void 0:a.length)||0} users`)}catch(y){k.error("Failed to load users",y),p(y.message||"Error al cargar los usuarios")}finally{h(!1)}},[]);d.useEffect(()=>{I()},[]),d.useEffect(()=>{E()},[g.length,E]);const v=d.useCallback((a,y)=>{N(a,y)},[N]),R=d.useCallback(()=>{n()},[n]),w=()=>e.jsxs("section",{className:"filters-section","aria-label":"Filtros de b√∫squeda",children:[e.jsxs("div",{className:"filters-header",children:[e.jsx("h3",{className:"filters-title",children:"Filtros de B√∫squeda"}),u&&e.jsx("button",{onClick:R,className:"clear-filters-button",type:"button","aria-label":"Limpiar todos los filtros",children:"Limpiar Filtros"})]}),e.jsxs("div",{className:"filters-grid",children:[e.jsx(f,{field:"id",label:"ID",value:i.id,onChange:v,placeholder:"Buscar por ID..."}),e.jsx(f,{field:"usuario",label:"Usuario",value:i.usuario,onChange:v,placeholder:"Buscar por usuario..."}),e.jsx(f,{field:"nombre",label:"Nombre",value:i.nombre,onChange:v,placeholder:"Buscar por nombre..."}),e.jsx(f,{field:"apellido",label:"Apellido",value:i.apellido,onChange:v,placeholder:"Buscar por apellido..."}),e.jsx(f,{field:"email",label:"Email",value:i.email,onChange:v,placeholder:"Buscar por email..."}),e.jsx(f,{field:"ciudad",label:"Ciudad",value:i.ciudad,onChange:v,placeholder:"Buscar por ciudad..."}),e.jsx(f,{field:"especialidad",label:"Especialidad",value:i.especialidad,onChange:v,placeholder:"Buscar por especialidad..."}),e.jsx(f,{field:"telefono",label:"Tel√©fono",value:i.telefono,onChange:v,placeholder:"Buscar por tel√©fono..."})]})]}),B=()=>e.jsxs("div",{className:"table-container",children:[e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"data-table",role:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",scope:"col",children:"ID"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Usuario"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Nombre"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Apellido"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Email"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Tel√©fono"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Ciudad"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Direcci√≥n"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Especialidad"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Instagram"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Facebook"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"X (Twitter)"})]})}),e.jsx("tbody",{children:c.map(a=>e.jsxs("tr",{className:"table-row",children:[e.jsx(m,{children:a.id}),e.jsx(m,{title:a.usuario,children:a.usuario}),e.jsx(m,{title:a.nombre,children:a.nombre}),e.jsx(m,{title:a.apellido,children:a.apellido}),e.jsx(m,{title:a.email,children:a.email}),e.jsx(m,{title:a.telefono,children:a.telefono}),e.jsx(m,{title:a.ciudad,children:a.ciudad}),e.jsx(m,{title:a.direccion,children:a.direccion}),e.jsx(m,{title:a.especialidad,children:a.especialidad}),e.jsx(m,{title:a.instagram,children:a.instagram}),e.jsx(m,{title:a.facebook,children:a.facebook}),e.jsx(m,{title:a.x,children:a.x})]},a.id))})]})}),b>1&&e.jsx(T,{currentPage:o,totalPages:b,totalItems:x,itemsPerPage:S,onPageChange:F,hasNextPage:P,hasPrevPage:C,onNextPage:j,onPrevPage:L,onFirstPage:M,onLastPage:A})]}),D=()=>e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon","aria-hidden":"true",children:"üìã"}),e.jsx("h3",{className:"empty-title",children:"No hay usuarios"}),e.jsx("p",{className:"empty-description",children:u?"No se encontraron usuarios que coincidan con los filtros aplicados.":"No hay usuarios registrados en el sistema."})]}),O=()=>{const a=r&&r.includes("CORS");return e.jsxs("div",{className:"error-alert",role:"alert",children:[e.jsx("span",{"aria-hidden":"true",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("strong",{children:a?"Error de Configuraci√≥n CORS":"Error de Conexi√≥n"}),e.jsx("p",{children:r}),a&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fff3cd",borderRadius:"4px"},children:[e.jsx("h4",{children:"Soluci√≥n para el administrador del API:"}),e.jsx("p",{children:"Agregar a la configuraci√≥n CORS del servidor:"}),e.jsx("code",{style:{backgroundColor:"#f8f9fa",padding:"0.5rem",borderRadius:"2px"},children:"Access-Control-Allow-Origin: https://netproadmin.store"})]})]}),!a&&e.jsx("button",{onClick:I,className:"reload-button",type:"button",style:{marginLeft:"1rem"},children:"Reintentar"})]})};return l?e.jsx(U,{message:"Cargando usuarios..."}):e.jsxs("div",{className:"listado-container",children:[e.jsxs("header",{className:"listado-header",children:[e.jsx("h2",{className:"listado-title",children:"Lista de Usuarios"}),e.jsxs("button",{onClick:I,disabled:l,className:"reload-button",type:"button","aria-label":"Recargar lista de usuarios",children:[e.jsx("span",{"aria-hidden":"true",children:"üîÑ"}),"Recargar"]})]}),r&&O(),!r&&e.jsxs(e.Fragment,{children:[w(),u&&e.jsxs("div",{className:"results-counter",children:["Mostrando ",g.length," de ",s.length," usuarios"]}),g.length===0?D():B()]})]})};export{z as default};
//# sourceMappingURL=Listado-DZGUNYdu.js.map
