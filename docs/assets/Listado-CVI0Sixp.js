import{j as e,l as k,a as U,L as O}from"./index-Dc33HuM7.js";import{r as c}from"./vendor-BoGTwuKF.js";const q=(s,t={})=>{const[l,d]=c.useState({}),h=c.useMemo(()=>Object.keys(l).length===0?s:s.filter(n=>Object.entries(l).every(([u,r])=>{if(!r||r.trim()==="")return!0;const b=n[u];if(b==null)return!1;const x=b.toString().toLowerCase(),o=r.toString().toLowerCase();switch((t[u]||{}).type){case"exact":return x===o;case"number":return parseFloat(b)===parseFloat(r);case"contains":default:return x.includes(o)}})),[s,l,t]),m=(n,u)=>{d(r=>({...r,[n]:u}))},g=n=>{d(u=>{const r={...u};return delete r[n],r})},i=()=>{d({})},f=Object.keys(l).some(n=>l[n]&&l[n].toString().trim()!=="");return{filteredData:h,filters:l,setFilter:m,clearFilter:g,clearAllFilters:i,hasActiveFilters:f}},V=(s,t=10)=>{const[l,d]=c.useState(1),h=s.length,m=Math.ceil(h/t),g=c.useMemo(()=>{const x=(l-1)*t,o=x+t;return s.slice(x,o)},[s,l,t]),i=x=>{const o=Math.max(1,Math.min(x,m));d(o)},f=()=>{i(l+1)},n=()=>{i(l-1)},u=()=>{i(1)},r=()=>{i(m)},b=()=>{d(1)};return{currentPage:l,totalPages:m,totalItems:h,paginatedData:g,hasNextPage:l<m,hasPrevPage:l>1,goToPage:i,goToNextPage:f,goToPrevPage:n,goToFirstPage:u,goToLastPage:r,reset:b}},L=c.memo(({currentPage:s,totalPages:t,totalItems:l,itemsPerPage:d,onPageChange:h,hasNextPage:m,hasPrevPage:g,onNextPage:i,onPrevPage:f,onFirstPage:n,onLastPage:u})=>{if(t<=1)return null;const r=(s-1)*d+1,b=Math.min(s*d,l),x=()=>{const o=[];let v=Math.max(1,s-Math.floor(2.5)),F=Math.min(t,v+5-1);F-v+1<5&&(v=Math.max(1,F-5+1)),v>1&&(o.push(e.jsx("button",{onClick:()=>h(1),className:"pagination-button","aria-label":"Ir a la p√°gina 1",children:"1"},1)),v>2&&o.push(e.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis-start")));for(let j=v;j<=F;j++)o.push(e.jsx("button",{onClick:()=>h(j),className:`pagination-button ${j===s?"active":""}`,"aria-label":`Ir a la p√°gina ${j}`,"aria-current":j===s?"page":void 0,children:j},j));return F<t&&(F<t-1&&o.push(e.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis-end")),o.push(e.jsx("button",{onClick:()=>h(t),className:"pagination-button","aria-label":`Ir a la p√°gina ${t}`,children:t},t))),o};return e.jsxs("div",{className:"pagination-container",role:"navigation","aria-label":"Paginaci√≥n",children:[e.jsxs("div",{className:"pagination-info",children:["Mostrando ",r," - ",b," de ",l," resultados"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:n,disabled:!g,className:"pagination-button","aria-label":"Ir a la primera p√°gina",children:"‚èÆÔ∏è Primera"}),e.jsx("button",{onClick:f,disabled:!g,className:"pagination-button","aria-label":"Ir a la p√°gina anterior",children:"‚¨ÖÔ∏è Anterior"}),x(),e.jsx("button",{onClick:i,disabled:!m,className:"pagination-button","aria-label":"Ir a la p√°gina siguiente",children:"Siguiente ‚û°Ô∏è"}),e.jsx("button",{onClick:u,disabled:!m,className:"pagination-button","aria-label":"Ir a la √∫ltima p√°gina",children:"√öltima ‚è≠Ô∏è"})]})]})});L.displayName="Pagination";const _={id:{type:"exact"},telefono:{type:"contains"},email:{type:"contains"}},E=10,p=c.memo(({children:s,className:t="",title:l})=>e.jsx("td",{className:`table-cell ${t}`,title:l,children:s}));p.displayName="TableCell";const N=c.memo(({field:s,label:t,value:l,onChange:d,placeholder:h})=>e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:`filter-${s}`,className:"filter-label",children:t}),e.jsx("input",{id:`filter-${s}`,type:"text",value:l||"",onChange:m=>d(s,m.target.value),placeholder:h,className:"filter-input"})]}));N.displayName="FilterInput";const z=()=>{const[s,t]=c.useState([]),[l,d]=c.useState(!0),[h,m]=c.useState(null),{filteredData:g,filters:i,setFilter:f,clearAllFilters:n,hasActiveFilters:u}=q(s,_),{currentPage:r,totalPages:b,totalItems:x,paginatedData:o,hasNextPage:T,hasPrevPage:v,goToPage:F,goToNextPage:j,goToPrevPage:S,goToFirstPage:M,goToLastPage:B,reset:P}=V(g,E),I=c.useCallback(async()=>{var a;try{d(!0),m(null),k.info("Loading users...");const y=await U.getUsers();t(y.data||[]),P(),k.info(`Loaded ${((a=y.data)==null?void 0:a.length)||0} users`)}catch(y){k.error("Failed to load users",y),m(y.message||"Error al cargar los usuarios")}finally{d(!1)}},[P]);c.useEffect(()=>{I()},[I]),c.useEffect(()=>{P()},[g.length,P]);const C=c.useCallback((a,y)=>{f(a,y)},[f]),w=c.useCallback(()=>{n()},[n]),A=()=>e.jsxs("section",{className:"filters-section","aria-label":"Filtros de b√∫squeda",children:[e.jsxs("div",{className:"filters-header",children:[e.jsx("h3",{className:"filters-title",children:"Filtros de B√∫squeda"}),u&&e.jsx("button",{onClick:w,className:"clear-filters-button",type:"button","aria-label":"Limpiar todos los filtros",children:"Limpiar Filtros"})]}),e.jsxs("div",{className:"filters-grid",children:[e.jsx(N,{field:"id",label:"ID",value:i.id,onChange:C,placeholder:"Buscar por ID..."}),e.jsx(N,{field:"usuario",label:"Usuario",value:i.usuario,onChange:C,placeholder:"Buscar por usuario..."}),e.jsx(N,{field:"nombre",label:"Nombre",value:i.nombre,onChange:C,placeholder:"Buscar por nombre..."}),e.jsx(N,{field:"apellido",label:"Apellido",value:i.apellido,onChange:C,placeholder:"Buscar por apellido..."}),e.jsx(N,{field:"email",label:"Email",value:i.email,onChange:C,placeholder:"Buscar por email..."}),e.jsx(N,{field:"ciudad",label:"Ciudad",value:i.ciudad,onChange:C,placeholder:"Buscar por ciudad..."}),e.jsx(N,{field:"especialidad",label:"Especialidad",value:i.especialidad,onChange:C,placeholder:"Buscar por especialidad..."}),e.jsx(N,{field:"telefono",label:"Tel√©fono",value:i.telefono,onChange:C,placeholder:"Buscar por tel√©fono..."})]})]}),D=()=>e.jsxs("div",{className:"table-container",children:[e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"data-table",role:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",scope:"col",children:"ID"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Usuario"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Nombre"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Apellido"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Email"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Tel√©fono"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Ciudad"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Direcci√≥n"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Especialidad"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Instagram"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"Facebook"}),e.jsx("th",{className:"table-header-cell",scope:"col",children:"X (Twitter)"})]})}),e.jsx("tbody",{children:o.map(a=>e.jsxs("tr",{className:"table-row",children:[e.jsx(p,{children:a.id}),e.jsx(p,{title:a.usuario,children:a.usuario}),e.jsx(p,{title:a.nombre,children:a.nombre}),e.jsx(p,{title:a.apellido,children:a.apellido}),e.jsx(p,{title:a.email,children:a.email}),e.jsx(p,{title:a.telefono,children:a.telefono}),e.jsx(p,{title:a.ciudad,children:a.ciudad}),e.jsx(p,{title:a.direccion,children:a.direccion}),e.jsx(p,{title:a.especialidad,children:a.especialidad}),e.jsx(p,{title:a.instagram,children:a.instagram}),e.jsx(p,{title:a.facebook,children:a.facebook}),e.jsx(p,{title:a.x,children:a.x})]},a.id))})]})}),b>1&&e.jsx(L,{currentPage:r,totalPages:b,totalItems:x,itemsPerPage:E,onPageChange:F,hasNextPage:T,hasPrevPage:v,onNextPage:j,onPrevPage:S,onFirstPage:M,onLastPage:B})]}),$=()=>e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon","aria-hidden":"true",children:"üìã"}),e.jsx("h3",{className:"empty-title",children:"No hay usuarios"}),e.jsx("p",{className:"empty-description",children:u?"No se encontraron usuarios que coincidan con los filtros aplicados.":"No hay usuarios registrados en el sistema."})]}),R=()=>e.jsxs("div",{className:"error-alert",role:"alert",children:[e.jsx("span",{"aria-hidden":"true",children:"‚ö†Ô∏è"}),h,e.jsx("button",{onClick:I,className:"reload-button",type:"button",style:{marginLeft:"1rem"},children:"Reintentar"})]});return l?e.jsx(O,{message:"Cargando usuarios..."}):e.jsxs("div",{className:"listado-container",children:[e.jsxs("header",{className:"listado-header",children:[e.jsx("h2",{className:"listado-title",children:"Lista de Usuarios"}),e.jsxs("button",{onClick:I,disabled:l,className:"reload-button",type:"button","aria-label":"Recargar lista de usuarios",children:[e.jsx("span",{"aria-hidden":"true",children:"üîÑ"}),"Recargar"]})]}),h&&R(),!h&&e.jsxs(e.Fragment,{children:[A(),u&&e.jsxs("div",{className:"results-counter",children:["Mostrando ",g.length," de ",s.length," usuarios"]}),g.length===0?$():D()]})]})};export{z as default};
//# sourceMappingURL=Listado-CVI0Sixp.js.map
