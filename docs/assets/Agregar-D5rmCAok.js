import{u as k,l as B,a as U,j as e,b as w}from"./index-CyMIcXeF.js";import{r as f}from"./vendor-BoGTwuKF.js";const y=f.memo(({current:o,max:m,className:u=""})=>{const c=o/m*100;let t="character-counter";return c>=90?t+=" error":c>=75&&(t+=" warning"),e.jsxs("div",{className:`${t} ${u}`,children:[o,"/",m]})});y.displayName="CharacterCounter";const n=f.memo(({id:o,name:m,type:u="text",label:c,value:t,onChange:s,onBlur:r,error:a,touched:d,placeholder:h,required:x=!1,maxLength:p,helpText:b,className:v=""})=>e.jsxs("div",{className:`form-group ${v}`,children:[e.jsxs("label",{htmlFor:o,className:"form-label",children:[c,x&&e.jsx("span",{className:"required-indicator","aria-hidden":"true",children:" *"})]}),e.jsx("input",{id:o,name:m,type:u,value:t,onChange:s,onBlur:r,className:`form-input ${d&&a?"error":""}`,placeholder:h,required:x,maxLength:p,"aria-invalid":d&&a?"true":"false","aria-describedby":[d&&a?`${o}-error`:null,b?`${o}-help`:null,p?`${o}-counter`:null].filter(Boolean).join(" ")||void 0}),p&&e.jsx(y,{current:(t==null?void 0:t.length)||0,max:p,className:"character-counter"}),b&&e.jsx("div",{id:`${o}-help`,className:"form-help",children:b}),d&&a&&e.jsxs("div",{id:`${o}-error`,className:"form-error",role:"alert",children:[e.jsx("span",{"aria-hidden":"true",children:"⚠️"}),a]})]}));n.displayName="FormInput";const F=f.memo(({id:o,name:m,label:u,value:c,onChange:t,onBlur:s,error:r,touched:a,placeholder:d,maxLength:h,helpText:x,className:p=""})=>e.jsxs("div",{className:`form-group ${p}`,children:[e.jsx("label",{htmlFor:o,className:"form-label",children:u}),e.jsx("textarea",{id:o,name:m,value:c,onChange:t,onBlur:s,className:`form-textarea ${a&&r?"error":""}`,placeholder:d,maxLength:h,"aria-invalid":a&&r?"true":"false","aria-describedby":[a&&r?`${o}-error`:null,x?`${o}-help`:null,h?`${o}-counter`:null].filter(Boolean).join(" ")||void 0}),h&&e.jsx(y,{current:(c==null?void 0:c.length)||0,max:h}),x&&e.jsx("div",{id:`${o}-help`,className:"form-help",children:x}),a&&r&&e.jsxs("div",{id:`${o}-error`,className:"form-error",role:"alert",children:[e.jsx("span",{"aria-hidden":"true",children:"⚠️"}),r]})]}));F.displayName="FormTextarea";const M=()=>{const[o,m]=f.useState(""),[u,c]=f.useState(""),t={usuario:"",nombre:"",apellido:"",ciudad:"",direccion:"",telefono:"",especialidad:"",email:"",instagram:"",facebook:"",x:"",otro1:"",otro2:"",otro3:"",otro4:""},{values:s,errors:r,touched:a,isSubmitting:d,handleChange:h,handleBlur:x,handleSubmit:p,reset:b,setFieldError:v}=k(t,w),C=f.useCallback(()=>{m(""),c("")},[]),$=f.useCallback(async g=>{var N;try{C(),B.info("Creating new user...",g);const j=await U.createUser(g);m(j.message||"Usuario creado exitosamente"),b(),B.info("User created successfully",j.data)}catch(j){B.error("Failed to create user",j);const I=j.message||"Error al crear el usuario";c(I),(N=j.message)!=null&&N.includes("usuario ya existe")&&v("usuario","Este usuario ya está registrado")}},[C,b,v]),E=async g=>{g.preventDefault(),await p($)},l=g=>{const{name:N,value:j}=g.target;h(N,j),C()},i=g=>{const{name:N}=g.target;x(N)},S=()=>{b(),C()};return e.jsxs("div",{className:"agregar-container",children:[e.jsxs("header",{className:"agregar-header",children:[e.jsx("h2",{className:"agregar-title",children:"Agregar Nuevo Usuario"}),e.jsx("p",{className:"agregar-subtitle",children:"Complete el formulario para registrar un nuevo usuario en el sistema"})]}),e.jsxs("div",{className:"form-card",children:[o&&e.jsxs("div",{className:"success-message",role:"alert",children:[e.jsx("span",{"aria-hidden":"true",children:"✅"}),o]}),u&&e.jsxs("div",{className:"error-message",role:"alert",children:[e.jsx("span",{"aria-hidden":"true",children:"❌"}),u]}),e.jsxs("form",{className:"user-form",onSubmit:E,noValidate:!0,children:[e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{className:"section-title",children:"Información Básica"}),e.jsxs("div",{className:"form-grid",children:[e.jsx(n,{id:"usuario",name:"usuario",label:"Usuario",value:s.usuario,onChange:l,onBlur:i,error:r.usuario,touched:a.usuario,placeholder:"nombre_usuario",required:!0,maxLength:20,helpText:"Solo letras, números y guiones bajos"}),e.jsx(n,{id:"nombre",name:"nombre",label:"Nombre",value:s.nombre,onChange:l,onBlur:i,error:r.nombre,touched:a.nombre,placeholder:"Juan",required:!0,maxLength:50}),e.jsx(n,{id:"apellido",name:"apellido",label:"Apellido",value:s.apellido,onChange:l,onBlur:i,error:r.apellido,touched:a.apellido,placeholder:"Pérez",required:!0,maxLength:50}),e.jsx(n,{id:"email",name:"email",type:"email",label:"Email",value:s.email,onChange:l,onBlur:i,error:r.email,touched:a.email,placeholder:"usuario@ejemplo.com",helpText:"Email válido (opcional)"}),e.jsx(n,{id:"telefono",name:"telefono",type:"tel",label:"Teléfono",value:s.telefono,onChange:l,onBlur:i,error:r.telefono,touched:a.telefono,placeholder:"123456789",helpText:"Solo números (9-15 dígitos)"}),e.jsx(n,{id:"especialidad",name:"especialidad",label:"Especialidad",value:s.especialidad,onChange:l,onBlur:i,error:r.especialidad,touched:a.especialidad,placeholder:"Desarrollador Frontend",maxLength:50})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{className:"section-title",children:"Ubicación"}),e.jsxs("div",{className:"form-grid",children:[e.jsx(n,{id:"ciudad",name:"ciudad",label:"Ciudad",value:s.ciudad,onChange:l,onBlur:i,error:r.ciudad,touched:a.ciudad,placeholder:"Madrid",maxLength:50}),e.jsx(F,{id:"direccion",name:"direccion",label:"Dirección",value:s.direccion,onChange:l,onBlur:i,error:r.direccion,touched:a.direccion,placeholder:"Calle Ejemplo 123, Piso 2A",maxLength:100,className:"full-width"})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{className:"section-title",children:"Redes Sociales"}),e.jsxs("div",{className:"form-grid",children:[e.jsx(n,{id:"instagram",name:"instagram",label:"Instagram",value:s.instagram,onChange:l,onBlur:i,error:r.instagram,touched:a.instagram,placeholder:"@usuario",helpText:"Incluir @ al inicio"}),e.jsx(n,{id:"facebook",name:"facebook",label:"Facebook",value:s.facebook,onChange:l,onBlur:i,error:r.facebook,touched:a.facebook,placeholder:"facebook.com/usuario",helpText:"URL completa de Facebook"}),e.jsx(n,{id:"x",name:"x",label:"X (Twitter)",value:s.x,onChange:l,onBlur:i,error:r.x,touched:a.x,placeholder:"@usuario",helpText:"Incluir @ al inicio"})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsx("h3",{className:"section-title",children:"Información Adicional"}),e.jsxs("div",{className:"form-grid",children:[e.jsx(n,{id:"otro1",name:"otro1",label:"Campo Extra 1",value:s.otro1,onChange:l,onBlur:i,error:r.otro1,touched:a.otro1,placeholder:"Información adicional 1"}),e.jsx(n,{id:"otro2",name:"otro2",label:"Campo Extra 2",value:s.otro2,onChange:l,onBlur:i,error:r.otro2,touched:a.otro2,placeholder:"Información adicional 2"}),e.jsx(n,{id:"otro3",name:"otro3",label:"Campo Extra 3",value:s.otro3,onChange:l,onBlur:i,error:r.otro3,touched:a.otro3,placeholder:"Información adicional 3"}),e.jsx(n,{id:"otro4",name:"otro4",label:"Campo Extra 4",value:s.otro4,onChange:l,onBlur:i,error:r.otro4,touched:a.otro4,placeholder:"Información adicional 4"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:S,className:"reset-button",disabled:d,children:"Limpiar Formulario"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:d,"aria-describedby":"submit-button-description",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner","aria-hidden":"true"}),"Creando Usuario..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",children:"➕"}),"Crear Usuario"]})})]})]})]})]})};export{M as default};
//# sourceMappingURL=Agregar-D5rmCAok.js.map
